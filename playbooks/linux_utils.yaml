- name: Download and unarchive AWS CLI
  ansible.builtin.unarchive:
    src: https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip
    dest: /tmp
    remote_src: yes
  become: yes

- name: Install AWS CLI
  ansible.builtin.command:
    cmd: /tmp/aws/install --bin-dir /usr/local/bin --install-dir /usr/local/aws-cli --update
  become: yes

- name: download talosctl
  ansible.builtin.get_url:
    url: "https://github.com/siderolabs/talos/releases/download/v1.7.0/talosctl-linux-arm64"
    dest: "/usr/local/bin/talosctl"
    mode: a+x
  become: yes

- name: download sops
  ansible.builtin.get_url:
    url: "https://github.com/getsops/sops/releases/download/v3.8.1/sops-v3.8.1.linux.amd64"
    dest: "/usr/local/bin/sops"
    mode: a+x
  become: yes
